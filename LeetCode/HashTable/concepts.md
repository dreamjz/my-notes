---
title: "Hash Table Concepts"
date: '2022-03-14'
categories:
 - leetcode
publish: true
---

**哈希表**是一种使用**哈希函数**组织数据，以支持快速插入和搜索的数据结构。

哈希表有两种不同类型：

- **哈希集合**： **集合**数据结构的实现之一，用于存储非重复值
- **哈希映射**： **映射**数据结构的实现之一，用于存储 K, V 键值对

## 1. 哈希表原理

哈希表的关键思想是**将键映射到存储桶**：

- 插入新键时，哈希函数决定该键应该分配到哪个桶里，并将该键存储在相应桶中。
- 搜索一个键时，哈希表将使用相同的哈希函数查找对应的桶，并只在特定的桶中进行搜索。

例如，将 `H(k) = k mod 5` 作为哈希函数：

- 插入：通过哈希函数解析键，将其映射到对应的桶中
- 搜索：通过相同的哈希函数解析键，并在对应的桶中搜索
  - 若搜索 1987，则在桶 2 中进行搜索可以找到
  - 若搜索 23，则在桶 3 中寻找，发现不在哈希表中

![img](https://aliyun-lc-upload.oss-cn-hangzhou.aliyuncs.com/aliyun-lc-upload/uploads/2018/09/06/screen-shot-2018-02-19-at-183537.png)

## 2. 设计哈希表

### 2.1 哈希函数

哈希函数是哈希表最重要的组件，用于将键映射到特定的桶中。哈希函数将取决于**键值的范围**和**桶的数量**。

![img](https://aliyun-lc-upload.oss-cn-hangzhou.aliyuncs.com/aliyun-lc-upload/uploads/2018/05/04/screen-shot-2018-05-04-at-145454.png)

哈希函数设计是一个开放问题，其思想是尽可能将键分配到桶中，理想情况下，完美的哈希函数是将键和桶之间进行一对一映射。

### 2.2 哈希冲突

在大多数情况下，相同的键映射到相同的桶中，即哈希冲突，是不可避免的。此时需要一个解决冲突的算法，来解决以下问题：

- 如何组织相同桶中的值
- 如何解决一个桶中的值过多的问题
- 如何在特定的桶中搜索目标值

根据哈希函数，这些与**桶的容量**和**键的数量**有关。假设桶中存储了 N 个键，当 N 为常数且很小时，简单使用数组即可。若 N 是可变的或者非常大，此时需要其他数据结构如**高度平衡二叉树**来代替。

## 3. 复杂度分析

若总共有 M 个键，哈希表很容易达到 *O(M)* 的空间复杂度。

但是时间复杂度和哈希表的设计有关，若使用**数组**来将值存储到一个桶中，理想情况下，桶的大小足够小时，可以看做常数，那么插入和搜索的时间复杂度为 *O(1)*。但是在最坏的情况下，桶的最大值为 `N`，插入时间复杂度为 *O(1)*，搜索时间复杂度为 *O(N)*。

一般内置哈希表的典型设计是：

- 键值可以是任何 **可哈希化的** 类型，且具有 **哈希码**，将用于映射函数以获取存储区索引。
- 每个桶中包含一个 **数组**，用于在初始时将所有值存储在同一个桶中
- 如果在同一个桶中有太多值，这些值将会保存在 **高度平衡二叉搜索树**中，插入和搜多的平均时间复杂度为 *O(1)*，而最坏情况下，时间复杂度为 *O(logN)*



## Reference

1. [哈希表] (https://leetcode-cn.com/leetbook/read/hash-table/x6sast/) leetbook
